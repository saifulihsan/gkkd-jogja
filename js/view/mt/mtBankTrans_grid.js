jun.mtbankTransStore=new Ext.data.JsonStore({root:"data",storeId:"bankTransStore",url:"Mahkotrans/MtbankTrans/view",fields:[{name:"type"},{name:"ref"},{name:"tgl"},{name:"debit"},{name:"kredit"},{name:"neraca"},{name:"person"}],autoLoad:!1,autoSave:!1}),jun.mtGlTransReportStore=new Ext.data.JsonStore({root:"data",storeId:"mtGlTransReportStore",url:"Mahkotrans/MtGlTrans/view",fields:[{name:"tgl"},{name:"type"},{name:"type_no"},{name:"ref"},{name:"amount"},{name:"person"}],autoLoad:!1,autoSave:!1}),jun.mtGeneralLedgerTransReportStore=new Ext.data.JsonStore({root:"data",storeId:"mtGeneralLedgerTransReportStore",url:"Mahkotrans/MtGlTrans/ViewJurnalUmum",fields:[{name:"type"},{name:"type_no"},{name:"tgl"},{name:"account"},{name:"debit"},{name:"kredit"}],autoLoad:!1,autoSave:!1}),jun.MtBankTransGrid=Ext.extend(Ext.grid.GridPanel,{title:"Mutasi Kas per Bank",id:"docs-jun.BankTransGrid",iconCls:"silk-grid",viewConfig:{forceFit:!0,getRowClass:function(a,b){var c=a.get("type");if(c.indexOf("Saldo Awal -")!==-1)return"x-row-bold";if(c.indexOf("Saldo Akhir -")!==-1)return"x-row-bold"}},sm:new Ext.grid.RowSelectionModel({singleSelect:!0}),columns:[{header:"Type",resizable:!0,dataIndex:"type"},{header:"Ref. Dokumen",resizable:!0,dataIndex:"ref"},{header:"Tanggal",resizable:!0,dataIndex:"tgl"},{header:"Debit",resizable:!0,dataIndex:"debit",align:"right"},{header:"Kredit",resizable:!0,dataIndex:"kredit",align:"right"},{header:"Saldo",resizable:!0,dataIndex:"neraca",align:"right"},{header:"Person",resizable:!0,dataIndex:"person",hidden:!0}],initComponent:function(){this.store=jun.mtbankTransStore,this.store.on({load:{fn:function(a,b,c){},scope:this},loadexception:{fn:function(a,b,c,d){console.info("store loadexception, arguments:",arguments),console.info("error = ",d)},scope:this}}),this.store.on("beforeload",function(a,b){a.removeAll(),b.params={bank_act:Ext.getCmp("bank_act_banktrans").getValue(),from_date:(new Date(Ext.getCmp("from_date_banktrans").getValue())).dateFormat("Y-m-d"),to_date:(new Date(Ext.getCmp("to_date_banktrans").getValue())).dateFormat("Y-m-d")}}),this.tbar={xtype:"toolbar",buttonAlign:"center",items:[{xtype:"form",items:[{xtype:"combo",name:"filefor",labelWidth:50}]},"Akun Bank : ",{xtype:"combo",id:"bank_act_banktrans",typeAhead:!0,triggerAction:"all",lazyRender:!0,mode:"local",fieldLabel:"bank_act",store:jun.rztMtBankAccounts,valueField:"id",displayField:"bank_account_name",ref:"../bank_act"},{xtype:"tbseparator"}," Dari : ",{xtype:"datefield",name:"from_date_banktrans",id:"from_date_banktrans",format:"d/m/Y",ref:"../trans_date_mulai",value:new Date},{xtype:"tbseparator"}," Sampai : ",{xtype:"datefield",name:"to_date_banktrans",id:"to_date_banktrans",format:"d/m/Y",ref:"../trans_date_sampai",value:new Date},{xtype:"tbseparator"},{xtype:"button",iconCls:"silk13-application_view_list",text:"Tampilkan",ref:"../btnRefresh"},{xtype:"tbseparator"},{xtype:"button",iconCls:"silk13-page_white_excel",text:"Save to Excel",hidden:!1,ref:"../btnSave"},{xtype:"tbseparator"},{xtype:"button",iconCls:"silk13-page_white_acrobat",text:"Save to PDF",hidden:!1,ref:"../btnPdf"},{xtype:"tbseparator"},{xtype:"button",iconCls:"silk13-printer",text:"Print",hidden:!1,ref:"../btnPrint"}]},jun.rztMtBankAccounts.reload(),jun.MtBankTransGrid.superclass.initComponent.call(this),this.btnRefresh.on("click",this.onbtnRefreshClick,this),this.btnSave.on("click",this.onbtnSaveclick,this),this.btnPdf.on("click",this.onbtnPdfclick,this),this.btnPrint.on("click",this.onbtnPrintclick,this),this.getSelectionModel().on("rowselect",this.getrow,this)},onbtnPrintclick:function(){var a=this.trans_date_mulai.getValue().format("Y-m-d"),b=this.trans_date_sampai.getValue().format("Y-m-d"),c=this.bank_act.getValue(),d=window.open("","form","width=800,height=600,location=no,menubar=0,status=0,resizeable,scrollbars");d.document.write("<html><title>Mutasi Kas per Rekening</title><body><form id='form' method='POST' action='Mahkotrans/MtReport/MutasiKasPerBank'><input type='hidden' name='trans_date_mulai' value='"+a+"'>"+"<input type='hidden' name='trans_date_sampai' value='"+b+"'>"+"<input type='hidden' name='bank_act' value='"+c+"'>"+"<input type='hidden' name='format' value='html'>"+"</form></body></html>"),d.document.close(),d.document.getElementById("form").submit()},onbtnPdfclick:function(){var a=this.trans_date_mulai.getValue().format("Y-m-d"),b=this.trans_date_sampai.getValue().format("Y-m-d"),c=this.bank_act.getValue(),d=window.open("","form","width=1,height=1,location=no,menubar=0,status=0,resizeable,scrollbars");d.document.write("<html><title>Mutasi Kas per Rekening</title><body><form id='form' method='POST'  onsubmit='self.close();' action='Mahkotrans/MtReport/MutasiKasPerBank'><input type='hidden' name='trans_date_mulai' value='"+a+"'>"+"<input type='hidden' name='trans_date_sampai' value='"+b+"'>"+"<input type='hidden' name='bank_act' value='"+c+"'>"+"<input type='hidden' name='format' value='pdf'>"+"</form>"+"</body></html>"),d.document.close(),d.document.getElementById("form").submit()},onbtnSaveclick:function(){Ext.getCmp("form-MtReportMutasiWin").getForm().standardSubmit=!0,Ext.getCmp("form-MtReportMutasiWin").getForm().url="Mahkotrans/MtReport/MutasiKasPerBank",this.format.setValue("excel"),Ext.getCmp("form-MtReportMutasiWin").getForm().submit()},getrow:function(a,b,c){this.record=c;var d=this.sm.getSelections()},onbtnRefreshClick:function(){this.store.load()},loadForm:function(){var a=new jun.BankTransWin({modez:0});a.show()},loadEditForm:function(){var a=this.sm.getSelected();if(a==""){Ext.MessageBox.alert("Warning","Anda belum memilih Jenis Pelayanan");return}var b=a.json.id,c=new jun.BankTransWin({modez:1,id:b});c.show(this),c.formz.getForm().loadRecord(this.record)}}),jun.MtGlTransReportGrid=Ext.extend(Ext.grid.GridPanel,{title:"Daftar Jurnal",id:"docs-jun.MtGlTransReportGrid",iconCls:"silk-grid",viewConfig:{forceFit:!0},sm:new Ext.grid.RowSelectionModel({singleSelect:!0}),columns:[{header:"Tanggal",resizable:!0,dataIndex:"tgl"},{header:"Tipe Transaksi",resizable:!0,dataIndex:"type"},{header:"No. Transaksi",resizable:!0,dataIndex:"type_no"},{header:"Ref. Dokumen",resizable:!0,dataIndex:"ref"},{header:"Total",resizable:!0,dataIndex:"amount",align:"right"},{header:"Person",resizable:!0,dataIndex:"person"}],initComponent:function(){this.store=jun.mtGlTransReportStore,this.store.on({load:{fn:function(a,b,c){},scope:this},loadexception:{fn:function(a,b,c,d){console.info("store loadexception, arguments:",arguments),console.info("error = ",d)},scope:this}}),this.store.on("beforeload",function(a,b){a.removeAll(),b.params={from_date:(new Date(Ext.getCmp("from_date_mt_gltrans").getValue())).dateFormat("Y-m-d"),to_date:(new Date(Ext.getCmp("to_date_mt_gltrans").getValue())).dateFormat("Y-m-d")}}),this.tbar={xtype:"toolbar",buttonAlign:"center",items:[" Dari : ",{xtype:"datefield",name:"from_date_mt_gltrans",id:"from_date_mt_gltrans",format:"d/m/Y",value:new Date},{xtype:"tbseparator"}," Sampai : ",{xtype:"datefield",name:"to_date_mt_gltrans",id:"to_date_mt_gltrans",format:"d/m/Y",value:new Date},{xtype:"tbseparator"},{xtype:"button",text:"Tampilkan",ref:"../btnRefresh"}]},jun.MtBankTransGrid.superclass.initComponent.call(this),this.btnRefresh.on("click",this.onbtnRefreshClick,this),this.getSelectionModel().on("rowselect",this.getrow,this)},getrow:function(a,b,c){this.record=c;var d=this.sm.getSelections()},onbtnRefreshClick:function(){this.store.load()},loadForm:function(){var a=new jun.BankTransWin({modez:0});a.show()},loadEditForm:function(){var a=this.sm.getSelected();if(a==""){Ext.MessageBox.alert("Warning","Anda belum memilih Jenis Pelayanan");return}var b=a.json.id,c=new jun.BankTransWin({modez:1,id:b});c.show(this),c.formz.getForm().loadRecord(this.record)}}),jun.MtGeneralLedgerTransReportGrid=Ext.extend(Ext.grid.GridPanel,{title:"Daftar Jurnal Umum",id:"docs-jun.MtGeneralLedgerTransReportGrid",iconCls:"silk-grid",viewConfig:{forceFit:!0},sm:new Ext.grid.RowSelectionModel({singleSelect:!0}),columns:[{header:"Tanggal",resizable:!0,dataIndex:"tgl"},{header:"Tipe Transaksi",resizable:!0,dataIndex:"type"},{header:"No. Transaksi",resizable:!0,dataIndex:"type_no"},{header:"Account",resizable:!0,dataIndex:"account"},{header:"Debit",resizable:!0,dataIndex:"debit",align:"right"},{header:"Kredit",resizable:!0,dataIndex:"kredit",align:"right"}],initComponent:function(){this.store=jun.mtGeneralLedgerTransReportStore,this.store.on({load:{fn:function(a,b,c){},scope:this},loadexception:{fn:function(a,b,c,d){console.info("store loadexception, arguments:",arguments),console.info("error = ",d)},scope:this}}),this.store.on("beforeload",function(a,b){a.removeAll(),b.params={from_date:(new Date(Ext.getCmp("from_date_mt_GeneralLedgertrans").getValue())).dateFormat("Y-m-d"),to_date:(new Date(Ext.getCmp("to_date_mt_GeneralLedgertrans").getValue())).dateFormat("Y-m-d")}}),this.tbar={xtype:"toolbar",buttonAlign:"center",items:[" Dari : ",{xtype:"datefield",name:"from_date_mt_GeneralLedgertrans",id:"from_date_mt_GeneralLedgertrans",format:"d/m/Y",value:new Date},{xtype:"tbseparator"}," Sampai : ",{xtype:"datefield",name:"to_date_mt_GeneralLedgertrans",id:"to_date_mt_GeneralLedgertrans",format:"d/m/Y",value:new Date},{xtype:"tbseparator"},{xtype:"button",text:"Tampilkan",ref:"../btnRefresh"}]},jun.MtBankTransGrid.superclass.initComponent.call(this),this.btnRefresh.on("click",this.onbtnRefreshClick,this),this.getSelectionModel().on("rowselect",this.getrow,this)},getrow:function(a,b,c){this.record=c;var d=this.sm.getSelections()},onbtnRefreshClick:function(){this.store.load()},loadForm:function(){var a=new jun.BankTransWin({modez:0});a.show()},loadEditForm:function(){var a=this.sm.getSelected();if(a==""){Ext.MessageBox.alert("Warning","Anda belum memilih Jenis Pelayanan");return}var b=a.json.id,c=new jun.BankTransWin({modez:1,id:b});c.show(this),c.formz.getForm().loadRecord(this.record)}});