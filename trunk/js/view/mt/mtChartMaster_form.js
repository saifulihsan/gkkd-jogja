jun.MtChartMasterWin=Ext.extend(Ext.Window,{title:'Kode Rekening',modez:1,width:450,height:270,layout:'form',modal:true,padding:5,closeForm:false,initComponent:function(){this.items=[{xtype:'form',frame:false,bodyStyle:'background-color: #E4E4E4; padding: 10px',id:'form-MtChartMaster',labelWidth:125,labelAlign:'left',layout:'form',ref:'formz',border:false,items:[{xtype:'textfield',fieldLabel:'Kode Rekening',hideLabel:false,name:'account_code',id:'account_codeid',ref:'../account_code2',maxLength:15,anchor:'100%'},{xtype:'textfield',fieldLabel:'Nama Rekening',hideLabel:false,name:'account_name',id:'account_nameid',ref:'../account_name',maxLength:60,anchor:'100%'},{xtype:'combo',typeAhead:true,triggerAction:'all',lazyRender:true,mode:'local',fieldLabel:'Kelompok Rekening',store:jun.rztMtChartTypes,hiddenName:'account_type',hiddenValue:'account_type',valueField:'id',forceSelection:true,displayField:'name',anchor:'100%'},new jun.comboActive({fieldLabel:'Status',hideLabel:false,width:200,height:20,name:'status',ref:'../cmbActive',id:'statusid'}),{xtype:'textarea',fieldLabel:'Deskripsi',hideLabel:false,name:'description',id:'descriptionid',ref:'../description',anchor:'100%'},]}];this.fbar={xtype:'toolbar',items:[{xtype:'button',text:'Simpan',hidden:false,ref:'../btnSave'},{xtype:'button',text:'Simpan & Tutup',ref:'../btnSaveClose'},{xtype:'button',text:'Batal',ref:'../btnCancel'}]};jun.MtChartMasterWin.superclass.initComponent.call(this);this.btnSaveClose.on('click',this.onbtnSaveCloseClick,this);this.btnSave.on('click',this.onbtnSaveclick,this);this.btnCancel.on('click',this.onbtnCancelclick,this);if(this.modez==1||this.modez==2){this.btnSave.setVisible(false);}else{this.btnSave.setVisible(true);}},btnDisabled:function(status){this.btnSave.setDisabled(status);this.btnSaveClose.setDisabled(status);},saveForm:function()
{this.btnDisabled(true);var urlz;if(this.modez==1||this.modez==2){urlz='Mahkotrans/MtChartMaster/update/id/'+this.id;}else{urlz='Mahkotrans/MtChartMaster/create/';}Ext.getCmp('form-MtChartMaster').getForm().submit({url:urlz,timeOut:1000,scope:this,success:function(f,a){jun.rztMtChartMaster.reload();var response=Ext.decode(a.response.responseText);Ext.MessageBox.show({title:'Info',msg:response.msg,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.INFO});if(this.modez==0){Ext.getCmp('form-MtChartMaster').getForm().reset();this.btnDisabled(false);}if(this.closeForm){this.close();}},failure:function(f,a){var response=Ext.decode(a.response.responseText);Ext.MessageBox.show({title:'Warning',msg:response.msg,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.WARNING});this.btnDisabled(false);}});},onbtnSaveCloseClick:function()
{this.closeForm=true;this.saveForm(true);},onbtnSaveclick:function()
{this.closeForm=false;this.saveForm(false);},onbtnCancelclick:function(){this.close();}});jun.MtSaldoAwalWin=Ext.extend(Ext.Window,{title:'Saldo Awal',modez:1,width:350,height:170,layout:'form',modal:true,padding:5,closeForm:false,iswin:true,initComponent:function(){this.items=[{xtype:'form',frame:false,bodyStyle:'background-color: #E4E4E4; padding: 10px',id:'form-MtSaldoAwal',labelWidth:125,labelAlign:'left',layout:'form',ref:'formz',border:false,items:[{xtype:'xdatefield',ref:'../trans_date',fieldLabel:'Tanggal Transaksi',name:'trans_date',id:'trans_dateid',format:'d M Y',anchor:'100%'},{xtype:'combo',typeAhead:true,triggerAction:'all',lazyRender:true,mode:'local',fieldLabel:'Kode Rekening',store:jun.rztMtChartMaster,hiddenName:'account_code',hiddenValue:'account_code',valueField:'account_code',tpl:new Ext.XTemplate('<tpl for="."><div class="search-item">','<h3><span">{account_code} - {account_name}</span></h3><br />{description}','</div></tpl>'),matchFieldWidth:false,itemSelector:'div.search-item',editable:true,listWidth:300,displayField:'account_code',forceSelection:true,anchor:'100%'},{xtype:'numericfield',fieldLabel:'Jumlah',hideLabel:false,name:'amount',id:'amountid',ref:'../amount',maxLength:30,anchor:'100%'},]}];this.fbar={xtype:'toolbar',items:[{xtype:'button',text:'Simpan',hidden:false,ref:'../btnSave'},{xtype:'button',text:'Batal',ref:'../btnCancel'}]};jun.rztMtChartMaster.reload();jun.MtSaldoAwalWin.superclass.initComponent.call(this);this.on('activate',this.onActivate,this);this.btnSave.on('click',this.onbtnSaveclick,this);this.btnCancel.on('click',this.onbtnCancelclick,this);},btnDisabled:function(status){this.btnSave.setDisabled(status);},onActivate:function(){this.btnSave.hidden=false;},saveForm:function(){this.btnDisabled(true);Ext.getCmp('form-MtSaldoAwal').getForm().submit({url:'Mahkotrans/MtChartMaster/SetSaldoAwal/',timeOut:1000,scope:this,success:function(f,a){var response=Ext.decode(a.response.responseText);Ext.MessageBox.show({title:'Info',msg:response.msg,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.INFO});Ext.getCmp('form-MtSaldoAwal').getForm().reset();this.close();},failure:function(f,a){if(a.failureType=="client")return;var response=Ext.decode(a.response.responseText);Ext.MessageBox.show({title:'Warning',msg:response.msg,buttons:Ext.MessageBox.OK,icon:Ext.MessageBox.WARNING});this.btnDisabled(false);}});},onbtnSaveCloseClick:function(){this.closeForm=true;this.saveForm(true);},onbtnSaveclick:function(){this.closeForm=false;this.saveForm(false);},onbtnCancelclick:function(){this.close();}});